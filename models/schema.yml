version: 2

sources:
 - name: raw
   database: gen-lang-client-0099843416
   schema: gz_raw_data
   description: "Raw datasets ingested from source systems"
   tables:
      - name: adwords
        identifier: raw_gz_adwords

      - name: bing
        identifier: raw_gz_bing

      - name: criteo
        identifier: raw_gz_criteo

      - name: facebook
        identifier: raw_gz_facebook

      - name: sales
        identifier: raw_gz_sales
        description: "Raw sales transactions data"
        columns:
          - name: date_date
            description: "Date when the sales transaction occurred"

          - name: orders_id
            description: "Unique identifier of the order"

          - name: pdt_id
            description: "Identifier of the product sold"

          - name: revenue
            description: "Revenue generated by the order line"

          - name: quantity
            description: "Number of units sold in the order line"

      - name: product
        identifier: raw_gz_product
        description: "Raw product master data"
        columns:
          - name: products_id
            description: "Unique identifier of the product"
            tests:
             - not_null
             - unique

      - name: purchSE_PRICE
        description: "Purchase price in raw source (needs cleaning/casting)"

      - name: ship
        identifier: raw_gz_ship
        description: "Raw shipping information per order"
        columns:
          - name: orders_id
            description: "Unique identifier of the order"
            tests:
             - not_null
             - unique
            
          - name: shipping_fee
            description: "Shipping fee charged for the order"

          - name: shipping_fee_1
            description: "Duplicate shipping fee field from alternative source"

          - name: logCost
            description: "Raw logistics cost (needs cleaning/casting)"

          - name: ship_cost
            description: "Raw shipping cost as string (needs cleaning/casting)"

models:
  - name: stg_raw_sales
    columns:
      - name: sales_pk
        description: "Surrogate primary key for sales lines (orders_id + product id)"
        tests:
          - not_null
          - unique






